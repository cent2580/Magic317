{% extends 'blog/base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'blog/index_style.css' %}">
{% endblock %}

{% block header %}
    {% include 'blog/header.html' %}
{% endblock %}

{% block drawer %}
    {% include 'blog/drawer.html' %}
{% endblock %}

{% block content %}
    <div class="page-content-max-width">
        <form action="#" method="get">
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
                <label class="mdl-button mdl-js-button mdl-button--icon" for="search">
                    <i class="material-icons">search</i>
                </label>
                <div class="mdl-textfield__expandable-holder">
                    <input class="mdl-textfield__input" type="text" id="search">
                    <label class="mdl-textfield__label" for="sample-expandable">Expandable Input</label>
                </div>
            </div>
        </form>
        <div class="mdl-grid">
            {% block article_list %}
                {% for article in article_list %}
                    <div class="mdl-cell mdl-card mdl-shadow--4dp">
                        <div class="mdl-card__media">
                            <img class="article-image" src="{% static 'blog/images/photo.jpg' %}" border="0" alt="">
                        </div>
                        <div class="mdl-card__title mdl-card--border">
                            {{ article.atitle }}
                        </div>
                        <div class="mdl-card__supporting-text">
                            <div class="material-icons">
                                person
                            </div>
                            作者：{{ article.auser }}
                        </div>
                        <div class="mdl-card__supporting-text">
                            <div class="material-icons">
                                event
                            </div>
                            更新：{{ article.update_datatime }}
                        </div>
                        <div class="mdl-card__actions mdl-card--border">
                            <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--accent"
                               href="{% url 'blog:entry' article.id %}">
                                阅读更多
                            </a>
                            {#                <div class="mdl-layout-spacer"></div>#}
                            <a class="mdl-button mdl-js-button mdl-js-ripple-effect">
                                <i class="material-icons">thumb_up</i>
                            </a>
                        </div>
                    </div>
                {% endfor %}
            {% endblock %}
        </div>
        <div class="loading">
            <a class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                加载更多......
            </a>
        </div>
    </div>
{% endblock %}

{% block footer %}
    {% include 'blog/footer.html' %}
{% endblock %}

{% block script %}
    <script>
        $("#search").bind('input propertychange',function () {
            var keyword = $(this).val();

            $.ajax({
                url: 'ajax/search',
                data: {
                    'keyword': keyword
                },
                teyp: 'GET',
                dataType: 'json',
                success:function (content) {
                    $('.mdl-grid').html("<p>"+content.data+"</p>")
                }
            });
        });
    </script>
{% endblock %}

